# 埃尔德拉编年史 - 代理设置说明

为了让游戏系统能够访问外部AI服务（如XAI），您可能需要配置代理。下面是几种配置方式：

## 方法1：使用启动脚本（推荐）

我们提供了两个便捷的启动脚本，可以帮助您以代理模式启动游戏服务器：

### Windows用户

在命令提示符或PowerShell中执行：

```
start_with_proxy.cmd http://你的代理地址:端口
```

例如：
```
start_with_proxy.cmd http://127.0.0.1:7890
```

### Mac/Linux用户

首先赋予脚本执行权限：

```bash
chmod +x start_with_proxy.sh
```

然后执行：

```bash
./start_with_proxy.sh http://你的代理地址:端口
```

## 方法2：手动设置环境变量

如果您想手动设置代理环境变量，可以按照以下步骤操作：

### Windows

```
set HTTP_PROXY=http://你的代理地址:端口
set HTTPS_PROXY=http://你的代理地址:端口
deno task start --allow-env
```

### Mac/Linux

```bash
export HTTP_PROXY=http://你的代理地址:端口
export HTTPS_PROXY=http://你的代理地址:端口
deno task start --allow-env
```

## 配置浏览器端API直接访问

除了服务器端访问AI服务外，您还可以选择让浏览器端直接访问AI服务。如果您的浏览器已配置系统代理，且能够访问外部AI服务，这可能是一个更简单的方法。

要配置浏览器端直接访问：

1. 启动游戏后，点击右上角的「设置」按钮
2. 填写您的API密钥和其他设置
3. 点击「保存设置」按钮

请确保您的API密钥保密，特别是在共享电脑上。

## 代理获取方式

如果您需要代理服务，可以考虑以下几种方式：

1. 使用VPN服务
2. 使用代理软件（如Clash、V2Ray等）
3. 使用云服务提供商的代理服务

请注意，确保您使用的代理服务是安全的、合法的，并且符合相关服务条款。

## 常见问题

1. **为什么需要代理？**
   
   某些外部AI服务的API可能在部分地区无法直接访问，需要通过代理服务器进行连接。

2. **我的代理设置正确，但仍然无法连接**
   
   - 检查您的代理服务是否正常运行
   - 确认您使用的API端点地址是否正确
   - 验证您的API密钥是否有效

3. **如何检查代理是否生效？**
   
   启动服务器后，查看控制台输出。如果看到"使用系统代理:"的信息，表示代理设置已生效。